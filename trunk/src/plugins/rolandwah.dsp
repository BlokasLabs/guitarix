// generated automatically
// DO NOT MODIFY!
declare id "rolandwah";
declare name "Roland Double Beat";
declare category "Guitar Effects";
declare shortname "Double Beat";
declare description "Roland Double Beat";

import("filter.lib");
import("effect.lib");
import("oscillator.lib");

    LogPot(a, x) = if(a, (exp(a * x) - 1) / (exp(a) - 1), x);
    Inverted(b, x) = if(b, 1 - x, x);
    s = 0.993;
    fs = float(SR);

    wet = vslider("wet_dry[name:wet/dry][tooltip:percentage of processed signal in output signal]",  100, 0, 100, 1) : /(100);
    dry = 1 - wet;

fuzz = iir((b0/a0,b1/a0,b2/a0,b3/a0,b4/a0,b5/a0,b6/a0,b7/a0,b8/a0),(a1/a0,a2/a0,a3/a0,a4/a0,a5/a0,a6/a0,a7/a0,a8/a0)) with {


    Fuzz = vslider("Fuzz[name:Fuzz]", 0.5, 0, 1, 0.01) : Inverted(0) : LogPot(0) : smooth(s);
    
    b0 = Fuzz*pow(fs,4)*(fs*(fs*(1.82165381590155e-34*fs + 1.57206471944022e-27) + 8.06344317796452e-25) + 1.75333971598006e-23) + pow(fs,3)*(fs*(fs*(fs*(-5.55310765569968e-34*fs - 4.8752347359394e-27) - 2.57911836885096e-24) - 9.46466696004935e-23) - 8.76669857990029e-22);

    b1 = Fuzz*pow(fs,5)*(fs*(-1.09299228954093e-33*fs - 6.28825887776087e-27) - 1.6126886355929e-24) + pow(fs,3)*(pow(fs,2)*(fs*(3.3318645934198e-33*fs + 1.95009389437576e-26) + 5.15823673770192e-24) - 1.75333971598006e-21);

    b2 = Fuzz*pow(fs,4)*(fs*(fs*(2.55031534226217e-33*fs + 6.28825887776087e-27) - 1.6126886355929e-24) - 7.01335886392023e-23) + pow(fs,3)*(fs*(fs*(fs*(-7.77435071797955e-33*fs - 1.95009389437576e-26) + 5.15823673770192e-24) + 3.78586678401974e-22) + 1.75333971598006e-21);

    b3 = Fuzz*pow(fs,5)*(fs*(-2.55031534226217e-33*fs + 6.28825887776087e-27) + 4.83806590677871e-24) + pow(fs,3)*(pow(fs,2)*(fs*(7.77435071797955e-33*fs - 1.95009389437576e-26) - 1.54747102131058e-23) + 5.26001914794017e-21);

    b4 = Fuzz*pow(fs,4)*(-1.57206471944022e-26*pow(fs,2) + 1.05200382958803e-22) + pow(fs,4)*(4.8752347359394e-26*pow(fs,2) - 5.67880017602961e-22);

    b5 = Fuzz*pow(fs,5)*(fs*(2.55031534226217e-33*fs + 6.28825887776087e-27) - 4.83806590677871e-24) + pow(fs,3)*(pow(fs,2)*(fs*(-7.77435071797955e-33*fs - 1.95009389437576e-26) + 1.54747102131058e-23) - 5.26001914794017e-21);

    b6 = Fuzz*pow(fs,4)*(fs*(fs*(-2.55031534226217e-33*fs + 6.28825887776087e-27) + 1.6126886355929e-24) - 7.01335886392023e-23) + pow(fs,3)*(fs*(fs*(fs*(7.77435071797955e-33*fs - 1.95009389437576e-26) - 5.15823673770192e-24) + 3.78586678401974e-22) - 1.75333971598006e-21);

    b7 = Fuzz*pow(fs,5)*(fs*(1.09299228954093e-33*fs - 6.28825887776087e-27) + 1.6126886355929e-24) + pow(fs,3)*(pow(fs,2)*(fs*(-3.3318645934198e-33*fs + 1.95009389437576e-26) - 5.15823673770192e-24) + 1.75333971598006e-21);

    b8 = Fuzz*pow(fs,4)*(fs*(fs*(-1.82165381590155e-34*fs + 1.57206471944022e-27) - 8.06344317796452e-25) + 1.75333971598006e-23) + pow(fs,3)*(fs*(fs*(fs*(5.55310765569968e-34*fs - 4.8752347359394e-27) + 2.57911836885096e-24) - 9.46466696004935e-23) + 8.76669857990029e-22);

    a0 = Fuzz*fs*(fs*(fs*(fs*(fs*(fs*(fs*(1.06547675999473e-54*fs - 6.36703541780379e-34) - 9.00344543865557e-30) - 2.39397418473651e-26) - 1.34572992250123e-23) - 1.91115337400853e-21) - 4.31167897320117e-20) - 1.60575474208273e-19) + fs*(fs*(fs*(fs*(fs*(fs*(fs*(-1.1941846910457e-54*fs + 1.86853737366137e-33) + 1.15619064166179e-29) + 2.58670896475515e-26) + 1.49502594204983e-23) + 2.60211977798108e-21) + 1.38910427011718e-19) + 2.31715010157959e-18) + 8.02877371041363e-18;

    a1 = Fuzz*fs*(fs*(fs*(pow(fs,2)*(fs*(fs*(-8.52381407995785e-54*fs + 3.82022125068227e-33) + 3.60137817546223e-29) + 4.78794836947302e-26) - 3.82230674801706e-21) - 1.72467158928047e-19) - 9.63452845249636e-19) + fs*(fs*(fs*(pow(fs,2)*(fs*(fs*(9.55347752836564e-54*fs - 1.12112242419682e-32) - 4.62476256664716e-29) - 5.17341792951031e-26) + 5.20423955596215e-21) + 5.55641708046871e-19) + 1.39029006094775e-17) + 6.42301896833091e-17;

    a2 = Fuzz*fs*(fs*(fs*(fs*(fs*(fs*(fs*(2.98333492798525e-53*fs - 8.91384958492531e-33) - 3.60137817546223e-29) + 4.78794836947302e-26) + 5.38291969000492e-23) + 3.82230674801706e-21) - 1.72467158928047e-19) - 2.24805663891582e-18) + fs*(fs*(fs*(fs*(fs*(fs*(fs*(-3.34371713492797e-53*fs + 2.61595232312592e-32) + 4.62476256664716e-29) - 5.17341792951031e-26) - 5.98010376819931e-23) - 5.20423955596215e-21) + 5.55641708046871e-19) + 3.24401014221143e-17) + 2.24805663891582e-16;

    a3 = Fuzz*fs*(fs*(fs*(pow(fs,2)*(fs*(fs*(-5.96666985597049e-53*fs + 8.91384958492531e-33) - 3.60137817546223e-29) - 1.43638451084191e-25) + 1.14669202440512e-20) + 1.72467158928047e-19) - 2.24805663891582e-18) + fs*(fs*(fs*(pow(fs,2)*(fs*(fs*(6.68743426985594e-53*fs - 2.61595232312592e-32) + 4.62476256664716e-29) + 1.55202537885309e-25) - 1.56127186678865e-20) - 5.55641708046871e-19) + 3.24401014221143e-17) + 4.49611327783164e-16;

    a4 = Fuzz*pow(fs,2)*(pow(fs,2)*(pow(fs,2)*(7.45833731996312e-53*pow(fs,2) + 9.00344543865557e-29) - 8.07437953500738e-23) + 4.31167897320117e-19) + pow(fs,2)*(pow(fs,2)*(pow(fs,2)*(-8.35929283731993e-53*pow(fs,2) - 1.15619064166179e-28) + 8.97015565229896e-23) - 1.38910427011718e-18) + 5.62014159728954e-16;

    a5 = Fuzz*fs*(fs*(fs*(pow(fs,2)*(fs*(fs*(-5.96666985597049e-53*fs - 8.91384958492531e-33) - 3.60137817546223e-29) + 1.43638451084191e-25) - 1.14669202440512e-20) + 1.72467158928047e-19) + 2.24805663891582e-18) + fs*(fs*(fs*(pow(fs,2)*(fs*(fs*(6.68743426985594e-53*fs + 2.61595232312592e-32) + 4.62476256664716e-29) - 1.55202537885309e-25) + 1.56127186678865e-20) - 5.55641708046871e-19) - 3.24401014221143e-17) + 4.49611327783164e-16;

    a6 = Fuzz*fs*(fs*(fs*(fs*(fs*(fs*(fs*(2.98333492798525e-53*fs + 8.91384958492531e-33) - 3.60137817546223e-29) - 4.78794836947302e-26) + 5.38291969000492e-23) - 3.82230674801706e-21) - 1.72467158928047e-19) + 2.24805663891582e-18) + fs*(fs*(fs*(fs*(fs*(fs*(fs*(-3.34371713492797e-53*fs - 2.61595232312592e-32) + 4.62476256664716e-29) + 5.17341792951031e-26) - 5.98010376819931e-23) + 5.20423955596215e-21) + 5.55641708046871e-19) - 3.24401014221143e-17) + 2.24805663891582e-16;

    a7 = Fuzz*fs*(fs*(fs*(pow(fs,2)*(fs*(fs*(-8.52381407995785e-54*fs - 3.82022125068227e-33) + 3.60137817546223e-29) - 4.78794836947302e-26) + 3.82230674801706e-21) - 1.72467158928047e-19) + 9.63452845249636e-19) + fs*(fs*(fs*(pow(fs,2)*(fs*(fs*(9.55347752836564e-54*fs + 1.12112242419682e-32) - 4.62476256664716e-29) + 5.17341792951031e-26) - 5.20423955596215e-21) + 5.55641708046871e-19) - 1.39029006094775e-17) + 6.42301896833091e-17;

    a8 = Fuzz*fs*(fs*(fs*(fs*(fs*(fs*(fs*(1.06547675999473e-54*fs + 6.36703541780379e-34) - 9.00344543865557e-30) + 2.39397418473651e-26) - 1.34572992250123e-23) + 1.91115337400853e-21) - 4.31167897320117e-20) + 1.60575474208273e-19) + fs*(fs*(fs*(fs*(fs*(fs*(fs*(-1.1941846910457e-54*fs - 1.86853737366137e-33) + 1.15619064166179e-29) - 2.58670896475515e-26) + 1.49502594204983e-23) - 2.60211977798108e-21) + 1.38910427011718e-19) - 2.31715010157959e-18) + 8.02877371041363e-18;
};

wah(x) = x : iir((b0/a0,b1/a0,b2/a0,b3/a0,b4/a0,b5/a0,b6/a0),(a1/a0,a2/a0,a3/a0,a4/a0,a5/a0,a6/a0)) with {

    Wah1 = (x : amp_follower_ud(0.01,0.1) : min(0.9) : max(0.09) );
    
    Wah2 = vslider("Wah[name:Wah]", 0.5, 0.02, 1, 0.01) : Inverted(0) : LogPot(0) : smooth(s);
    
    sl = checkbox("mode[enum:manual|auto|alien]");

    Wah3 = (oscs(freq) + 1) / 2 : min(0.9) : max(0.09) with {
        freq = vslider("lfobpm[name:Alien Freq][tooltip:LFO in Beats per Minute]",24,24,360,1)/60;
    }; 

    Wah = select3(sl, Wah2, Wah1, Wah3);

    b0 = Wah*(Wah*pow(fs,3)*(fs*(fs*(7.18082556296232e-31*fs + 1.2196809675607e-26) + 1.81635217972948e-23) + 9.8345184835125e-22) + pow(fs,2)*(fs*(fs*(fs*(-7.16633351212421e-31*fs - 1.22012125074374e-26) - 1.83126711766163e-23) - 1.21592229012527e-21) - 1.2608516331659e-20)) + pow(fs,2)*(fs*(fs*(fs*(-9.65744972703433e-31*fs - 3.08822188644282e-26) - 4.82624719521696e-23) - 2.88264605310366e-21) - 1.49007855810795e-20);

    b1 = Wah*(Wah*pow(fs,4)*(fs*(-4.30849533777739e-30*fs - 4.87872387024281e-26) - 3.63270435945895e-23) + pow(fs,2)*(pow(fs,2)*(fs*(4.29980010727452e-30*fs + 4.88048500297496e-26) + 3.66253423532326e-23) - 2.5217032663318e-20)) + pow(fs,2)*(pow(fs,2)*(fs*(5.7944698362206e-30*fs + 1.23528875457713e-25) + 9.65249439043393e-23) - 2.98015711621591e-20);

    b2 = Wah*(Wah*pow(fs,3)*(fs*(fs*(1.07712383444435e-29*fs + 6.09840483780351e-26) - 1.81635217972948e-23) - 2.95035554505375e-21) + pow(fs,2)*(fs*(fs*(fs*(-1.07495002681863e-29*fs - 6.1006062537187e-26) + 1.83126711766163e-23) + 3.64776687037582e-21) + 1.2608516331659e-20)) + pow(fs,2)*(fs*(fs*(fs*(-1.44861745905515e-29*fs - 1.54411094322141e-25) + 4.82624719521696e-23) + 8.64793815931099e-21) + 1.49007855810795e-20);

    b3 = Wah*(Wah*pow(fs,4)*(-1.43616511259246e-29*pow(fs,2) + 7.2654087189179e-23) + pow(fs,2)*(pow(fs,2)*(1.43326670242484e-29*pow(fs,2) - 7.32506847064652e-23) + 5.0434065326636e-20)) + pow(fs,2)*(pow(fs,2)*(1.93148994540687e-29*pow(fs,2) - 1.93049887808679e-22) + 5.96031423243182e-20);

    b4 = Wah*(Wah*pow(fs,3)*(fs*(fs*(1.07712383444435e-29*fs - 6.09840483780351e-26) - 1.81635217972948e-23) + 2.95035554505375e-21) + pow(fs,2)*(fs*(fs*(fs*(-1.07495002681863e-29*fs + 6.1006062537187e-26) + 1.83126711766163e-23) - 3.64776687037582e-21) + 1.2608516331659e-20)) + pow(fs,2)*(fs*(fs*(fs*(-1.44861745905515e-29*fs + 1.54411094322141e-25) + 4.82624719521696e-23) - 8.64793815931099e-21) + 1.49007855810795e-20);

    b5 = Wah*(Wah*pow(fs,4)*(fs*(-4.30849533777739e-30*fs + 4.87872387024281e-26) - 3.63270435945895e-23) + pow(fs,2)*(pow(fs,2)*(fs*(4.29980010727452e-30*fs - 4.88048500297496e-26) + 3.66253423532326e-23) - 2.5217032663318e-20)) + pow(fs,2)*(pow(fs,2)*(fs*(5.7944698362206e-30*fs - 1.23528875457713e-25) + 9.65249439043393e-23) - 2.98015711621591e-20);

    b6 = Wah*(Wah*pow(fs,3)*(fs*(fs*(7.18082556296232e-31*fs - 1.2196809675607e-26) + 1.81635217972948e-23) - 9.8345184835125e-22) + pow(fs,2)*(fs*(fs*(fs*(-7.16633351212421e-31*fs + 1.22012125074374e-26) - 1.83126711766163e-23) + 1.21592229012527e-21) - 1.2608516331659e-20)) + pow(fs,2)*(fs*(fs*(fs*(-9.65744972703433e-31*fs + 3.08822188644282e-26) - 4.82624719521696e-23) + 2.88264605310366e-21) - 1.49007855810795e-20);

    a0 = Wah*(Wah*pow(fs,2)*(fs*(fs*(fs*(-4.29845675581904e-29*fs - 3.19373566665743e-26) - 8.90038927961101e-23) - 4.87042253786579e-20) - 3.50713071672392e-19) + fs*(fs*(fs*(fs*(fs*(1.72206886126217e-28*fs + 1.1453389852842e-25) + 9.7683567600612e-23) + 5.2144154673581e-20) + 1.07969798611464e-18) + 5.31383441927866e-18)) + fs*(fs*(fs*(fs*(fs*(5.0345082751012e-30*fs + 1.05561747816346e-26) + 2.55142258602227e-22) + 1.48648313435063e-19) + 3.76182116601294e-18) + 3.09198451037471e-17) + 8.05126427163433e-17;

    a1 = Wah*(Wah*pow(fs,2)*(pow(fs,2)*(fs*(2.57907405349142e-28*fs + 1.27749426666297e-25) + 1.7800778559222e-22) - 7.01426143344783e-19) + fs*(fs*(pow(fs,2)*(fs*(-1.0332413167573e-27*fs - 4.5813559411368e-25) - 1.95367135201224e-22) + 2.15939597222928e-18) + 2.12553376771146e-17)) + fs*(fs*(pow(fs,2)*(fs*(-3.02070496506072e-29*fs - 4.22246991265385e-26) - 5.10284517204454e-22) + 7.52364233202588e-18) + 1.23679380414989e-16) + 4.8307585629806e-16;

    a2 = Wah*(Wah*pow(fs,2)*(fs*(fs*(fs*(-6.44768513372856e-28*fs - 1.59686783332872e-25) + 8.90038927961101e-23) + 1.46112676135974e-19) + 3.50713071672392e-19) + fs*(fs*(fs*(fs*(fs*(2.58310329189325e-27*fs + 5.726694926421e-25) - 9.7683567600612e-23) - 1.56432464020743e-19) - 1.07969798611464e-18) + 2.65691720963933e-17)) + fs*(fs*(fs*(fs*(fs*(7.55176241265181e-29*fs + 5.27808739081731e-26) - 2.55142258602227e-22) - 4.4594494030519e-19) - 3.76182116601294e-18) + 1.54599225518736e-16) + 1.20768964074515e-15;

    a3 = Wah*(Wah*pow(fs,2)*(pow(fs,2)*(8.59691351163808e-28*pow(fs,2) - 3.5601557118444e-22) + 1.40285228668957e-18) + pow(fs,2)*(pow(fs,2)*(-3.44413772252433e-27*pow(fs,2) + 3.90734270402448e-22) - 4.31879194445857e-18)) + pow(fs,2)*(pow(fs,2)*(-1.00690165502024e-28*pow(fs,2) + 1.02056903440891e-21) - 1.50472846640518e-17) + 1.61025285432687e-15;

    a4 = Wah*(Wah*pow(fs,2)*(fs*(fs*(fs*(-6.44768513372856e-28*fs + 1.59686783332872e-25) + 8.90038927961101e-23) - 1.46112676135974e-19) + 3.50713071672392e-19) + fs*(fs*(fs*(fs*(fs*(2.58310329189325e-27*fs - 5.726694926421e-25) - 9.7683567600612e-23) + 1.56432464020743e-19) - 1.07969798611464e-18) - 2.65691720963933e-17)) + fs*(fs*(fs*(fs*(fs*(7.55176241265181e-29*fs - 5.27808739081731e-26) - 2.55142258602227e-22) + 4.4594494030519e-19) - 3.76182116601294e-18) - 1.54599225518736e-16) + 1.20768964074515e-15;

    a5 = Wah*(Wah*pow(fs,2)*(pow(fs,2)*(fs*(2.57907405349142e-28*fs - 1.27749426666297e-25) + 1.7800778559222e-22) - 7.01426143344783e-19) + fs*(fs*(pow(fs,2)*(fs*(-1.0332413167573e-27*fs + 4.5813559411368e-25) - 1.95367135201224e-22) + 2.15939597222928e-18) - 2.12553376771146e-17)) + fs*(fs*(pow(fs,2)*(fs*(-3.02070496506072e-29*fs + 4.22246991265385e-26) - 5.10284517204454e-22) + 7.52364233202588e-18) - 1.23679380414989e-16) + 4.8307585629806e-16;

    a6 = Wah*(Wah*pow(fs,2)*(fs*(fs*(fs*(-4.29845675581904e-29*fs + 3.19373566665743e-26) - 8.90038927961101e-23) + 4.87042253786579e-20) - 3.50713071672392e-19) + fs*(fs*(fs*(fs*(fs*(1.72206886126217e-28*fs - 1.1453389852842e-25) + 9.7683567600612e-23) - 5.2144154673581e-20) + 1.07969798611464e-18) - 5.31383441927866e-18)) + fs*(fs*(fs*(fs*(fs*(5.0345082751012e-30*fs - 1.05561747816346e-26) + 2.55142258602227e-22) - 1.48648313435063e-19) + 3.76182116601294e-18) - 3.09198451037471e-17) + 8.05126427163433e-17;
};

process =  _<:*(dry),(*(wet) :fuzz : wah ):>_;

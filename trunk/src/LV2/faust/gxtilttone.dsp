declare id "tiltdrive";
declare name "Tilt Tone Pro";
declare category "External";

import("filter.lib");
import("redeye.lib");


process = pre : iir((b0/a0,b1/a0,b2/a0,b3/a0,b4/a0,b5/a0),(a1/a0,a2/a0,a3/a0,a4/a0,a5/a0)) with {
    LogPot(a, x) = if(a, (exp(a * x) - 1) / (exp(a) - 1), x);
    Inverted(b, x) = if(b, 1 - x, x);
    s = 0.993;
    fs = float(SR);
    pre = _;

    
        
        Body = vslider("Body[name:Body]", 0.5, 0, 1, 0.01) : Inverted(0) : smooth(s);
            
                Tone = vslider("Tone[name:Tone]", 0.5, 0, 1, 0.01) : Inverted(0) : LogPot(1) : smooth(s);
            
                Drive = vslider("Drive[name:Drive]", 0.5, 0, 1, 0.01) : Inverted(1) : LogPot(1) : smooth(s);
            
                Level = vslider("Level[name:Level]", 0.5, 0, 1, 0.01) : Inverted(0) : LogPot(1) : smooth(s);
            
    b0 = Level*(Body*(Drive*pow(fs,2)*(fs*(-4.65200640142461e-18*fs - 1.46497127683842e-15) - 2.11285807782166e-14) + Tone*(Drive*pow(fs,2)*(fs*(fs*(-2.61047841231021e-21*fs - 3.95527032168216e-20) - 3.71038765066618e-30) - 5.62179947070636e-29) + pow(fs,2)*(fs*(fs*(2.61047841231021e-21*fs + 3.95527032168216e-20) + 3.71038765066618e-30) + 5.62179947070636e-29)) + pow(fs,2)*(fs*(4.65200640142461e-18*fs + 1.46497127683842e-15) + 2.11285807782166e-14)) + Drive*pow(fs,2)*(fs*(-1.04204943391911e-18*fs - 5.90609889146098e-15) - 8.92471252071873e-14) + Tone*(Drive*pow(fs,2)*(fs*(fs*(-5.84747164357487e-22*fs - 8.85980552056803e-21) + 5.57794532544917e-15) + 8.45143231128667e-14) + pow(fs,2)*(fs*(fs*(5.84747164357487e-22*fs + 8.85980552056803e-21) - 5.57794532544917e-15) - 8.45143231128667e-14)) + pow(fs,2)*(fs*(1.04204943391911e-18*fs + 5.90609889146098e-15) + 8.92471252071873e-14));

    b1 = Level*(Body*(Drive*pow(fs,2)*(fs*(1.39560192042738e-17*fs + 1.46497127683842e-15) - 2.11285807782166e-14) + Tone*(Drive*pow(fs,2)*(fs*(fs*(1.30523920615511e-20*fs + 1.18658109650465e-19) + 3.71038765066618e-30) - 5.62179947070636e-29) + pow(fs,2)*(fs*(fs*(-1.30523920615511e-20*fs - 1.18658109650465e-19) - 3.71038765066618e-30) + 5.62179947070636e-29)) + pow(fs,2)*(fs*(-1.39560192042738e-17*fs - 1.46497127683842e-15) + 2.11285807782166e-14)) + Drive*pow(fs,2)*(fs*(3.12614830175733e-18*fs + 5.90609889146098e-15) - 8.92471252071873e-14) + Tone*(Drive*pow(fs,2)*(fs*(fs*(2.92373582178743e-21*fs + 2.65794165617041e-20) - 5.57794532544917e-15) + 8.45143231128667e-14) + pow(fs,2)*(fs*(fs*(-2.92373582178743e-21*fs - 2.65794165617041e-20) + 5.57794532544917e-15) - 8.45143231128667e-14)) + pow(fs,2)*(fs*(-3.12614830175733e-18*fs - 5.90609889146098e-15) + 8.92471252071873e-14));

    b2 = Level*(Body*(Drive*pow(fs,2)*(fs*(-9.30401280284922e-18*fs + 2.92994255367684e-15) + 4.22571615564333e-14) + Tone*(Drive*pow(fs,2)*(fs*(fs*(-2.61047841231021e-20*fs - 7.91054064336433e-20) + 7.42077530133235e-30) + 1.12435989414127e-28) + pow(fs,2)*(fs*(fs*(2.61047841231021e-20*fs + 7.91054064336433e-20) - 7.42077530133235e-30) - 1.12435989414127e-28)) + pow(fs,2)*(fs*(9.30401280284922e-18*fs - 2.92994255367684e-15) - 4.22571615564333e-14)) + Drive*pow(fs,2)*(fs*(-2.08409886783822e-18*fs + 1.1812197782922e-14) + 1.78494250414375e-13) + Tone*(Drive*pow(fs,2)*(fs*(fs*(-5.84747164357486e-21*fs - 1.77196110411361e-20) - 1.11558906508983e-14) - 1.69028646225733e-13) + pow(fs,2)*(fs*(fs*(5.84747164357486e-21*fs + 1.77196110411361e-20) + 1.11558906508983e-14) + 1.69028646225733e-13)) + pow(fs,2)*(fs*(2.08409886783822e-18*fs - 1.1812197782922e-14) - 1.78494250414375e-13));

    b3 = Level*(Body*(Drive*pow(fs,2)*(fs*(-9.30401280284922e-18*fs - 2.92994255367684e-15) + 4.22571615564333e-14) + Tone*(Drive*pow(fs,2)*(fs*(fs*(2.61047841231021e-20*fs - 7.91054064336433e-20) - 7.42077530133235e-30) + 1.12435989414127e-28) + pow(fs,2)*(fs*(fs*(-2.61047841231021e-20*fs + 7.91054064336433e-20) + 7.42077530133235e-30) - 1.12435989414127e-28)) + pow(fs,2)*(fs*(9.30401280284922e-18*fs + 2.92994255367684e-15) - 4.22571615564333e-14)) + Drive*pow(fs,2)*(fs*(-2.08409886783822e-18*fs - 1.1812197782922e-14) + 1.78494250414375e-13) + Tone*(Drive*pow(fs,2)*(fs*(fs*(5.84747164357486e-21*fs - 1.77196110411361e-20) + 1.11558906508983e-14) - 1.69028646225733e-13) + pow(fs,2)*(fs*(fs*(-5.84747164357486e-21*fs + 1.77196110411361e-20) - 1.11558906508983e-14) + 1.69028646225733e-13)) + pow(fs,2)*(fs*(2.08409886783822e-18*fs + 1.1812197782922e-14) - 1.78494250414375e-13));

    b4 = Level*(Body*(Drive*pow(fs,2)*(fs*(1.39560192042738e-17*fs - 1.46497127683842e-15) - 2.11285807782166e-14) + Tone*(Drive*pow(fs,2)*(fs*(fs*(-1.30523920615511e-20*fs + 1.18658109650465e-19) - 3.71038765066618e-30) - 5.62179947070636e-29) + pow(fs,2)*(fs*(fs*(1.30523920615511e-20*fs - 1.18658109650465e-19) + 3.71038765066618e-30) + 5.62179947070636e-29)) + pow(fs,2)*(fs*(-1.39560192042738e-17*fs + 1.46497127683842e-15) + 2.11285807782166e-14)) + Drive*pow(fs,2)*(fs*(3.12614830175733e-18*fs - 5.90609889146098e-15) - 8.92471252071873e-14) + Tone*(Drive*pow(fs,2)*(fs*(fs*(-2.92373582178743e-21*fs + 2.65794165617041e-20) + 5.57794532544917e-15) + 8.45143231128667e-14) + pow(fs,2)*(fs*(fs*(2.92373582178743e-21*fs - 2.65794165617041e-20) - 5.57794532544917e-15) - 8.45143231128667e-14)) + pow(fs,2)*(fs*(-3.12614830175733e-18*fs + 5.90609889146098e-15) + 8.92471252071873e-14));

    b5 = Level*(Body*(Drive*pow(fs,2)*(fs*(-4.65200640142461e-18*fs + 1.46497127683842e-15) - 2.11285807782166e-14) + Tone*(Drive*pow(fs,2)*(fs*(fs*(2.61047841231021e-21*fs - 3.95527032168216e-20) + 3.71038765066618e-30) - 5.62179947070636e-29) + pow(fs,2)*(fs*(fs*(-2.61047841231021e-21*fs + 3.95527032168216e-20) - 3.71038765066618e-30) + 5.62179947070636e-29)) + pow(fs,2)*(fs*(4.65200640142461e-18*fs - 1.46497127683842e-15) + 2.11285807782166e-14)) + Drive*pow(fs,2)*(fs*(-1.04204943391911e-18*fs + 5.90609889146098e-15) - 8.92471252071873e-14) + Tone*(Drive*pow(fs,2)*(fs*(fs*(5.84747164357487e-22*fs - 8.85980552056803e-21) - 5.57794532544917e-15) + 8.45143231128667e-14) + pow(fs,2)*(fs*(fs*(-5.84747164357487e-22*fs + 8.85980552056803e-21) + 5.57794532544917e-15) - 8.45143231128667e-14)) + pow(fs,2)*(fs*(1.04204943391911e-18*fs - 5.90609889146098e-15) + 8.92471252071873e-14));

    a0 = Body*(Tone*(Tone*fs*(fs*(fs*(fs*(-2.20196238530113e-25*fs - 2.17931503100737e-22) - 6.97015807574444e-21) - 2.81458247587152e-20) + 4.29052522779372e-32) + fs*(fs*(fs*(fs*(2.62525390732477e-25*fs + 2.81564132170152e-22) + 9.67716852364725e-20) + 2.92826202944812e-18) + 1.17274269828036e-17) + 4.87559684976559e-30) + fs*(fs*(fs*(fs*(2.62525390732477e-24*fs + 4.06350352538518e-21) + 1.1019944255992e-18) + 4.65427400362912e-17) + 5.83051240035225e-16) + 1.83241046606283e-15) + Tone*(Tone*fs*(fs*(fs*(fs*(-2.18640566240203e-25*fs - 7.4373965003245e-22) - 5.10322864018117e-19) - 1.60195443528707e-17) - 6.45008484054134e-17) + fs*(fs*(fs*(fs*(2.28122296333533e-25*fs + 6.7333505453927e-22) + 2.91513197131548e-19) - 4.73548057740805e-17) - 1.77838894830509e-15) - 7.32964186425153e-15) + fs*(fs*(fs*(fs*(2.28122296333533e-24*fs + 8.79069607151715e-21) + 7.96263953610201e-18) + 8.74821708374195e-16) + 2.10762961057232e-14) + 8.10365204511649e-14;

    a1 = Body*(Tone*(Tone*fs*(fs*(fs*(fs*(1.10098119265056e-24*fs + 6.53794509302211e-22) + 6.97015807574444e-21) - 2.81458247587152e-20) + 1.28715756833812e-31) + fs*(fs*(fs*(fs*(-1.31262695366239e-24*fs - 8.44692396510456e-22) - 9.67716852364725e-20) + 2.92826202944812e-18) + 3.51822809484109e-17) + 2.43779842488279e-29) + fs*(fs*(fs*(fs*(-1.31262695366239e-23*fs - 1.21905105761555e-20) - 1.1019944255992e-18) + 4.65427400362912e-17) + 1.74915372010567e-15) + 9.16205233031414e-15) + Tone*(Tone*fs*(fs*(fs*(fs*(1.09320283120102e-24*fs + 2.23121895009735e-21) + 5.10322864018117e-19) - 1.60195443528707e-17) - 1.9350254521624e-16) + fs*(fs*(fs*(fs*(-1.14061148166766e-24*fs - 2.02000516361781e-21) - 2.91513197131548e-19) - 4.73548057740805e-17) - 5.33516684491528e-15) - 3.66482093212576e-14) + fs*(fs*(fs*(fs*(-1.14061148166766e-23*fs - 2.63720882145514e-20) - 7.96263953610201e-18) + 8.74821708374195e-16) + 6.32288883171697e-14) + 4.05182602255824e-13;

    a2 = Body*(Tone*(Tone*fs*(fs*(fs*(fs*(-2.20196238530113e-24*fs - 4.35863006201474e-22) + 1.39403161514889e-20) + 5.62916495174304e-20) + 8.58105045558744e-32) + fs*(fs*(fs*(fs*(2.62525390732477e-24*fs + 5.63128264340304e-22) - 1.93543370472945e-19) - 5.85652405889624e-18) + 2.34548539656073e-17) + 4.87559684976559e-29) + fs*(fs*(fs*(fs*(2.62525390732477e-23*fs + 8.12700705077035e-21) - 2.2039888511984e-18) - 9.30854800725824e-17) + 1.16610248007045e-15) + 1.83241046606283e-14) + Tone*(Tone*fs*(fs*(fs*(fs*(-2.18640566240203e-24*fs - 1.4874793000649e-21) + 1.02064572803623e-18) + 3.20390887057414e-17) - 1.29001696810827e-16) + fs*(fs*(fs*(fs*(2.28122296333533e-24*fs + 1.34667010907854e-21) - 5.83026394263095e-19) + 9.4709611548161e-17) - 3.55677789661019e-15) - 7.32964186425153e-14) + fs*(fs*(fs*(fs*(2.28122296333533e-23*fs + 1.75813921430343e-20) - 1.5925279072204e-17) - 1.74964341674839e-15) + 4.21525922114464e-14) + 8.10365204511649e-13;

    a3 = Body*(Tone*(Tone*fs*(fs*(fs*(fs*(2.20196238530113e-24*fs - 4.35863006201474e-22) - 1.39403161514889e-20) + 5.62916495174304e-20) - 8.58105045558744e-32) + fs*(fs*(fs*(fs*(-2.62525390732477e-24*fs + 5.63128264340304e-22) + 1.93543370472945e-19) - 5.85652405889624e-18) - 2.34548539656073e-17) + 4.87559684976559e-29) + fs*(fs*(fs*(fs*(-2.62525390732477e-23*fs + 8.12700705077035e-21) + 2.2039888511984e-18) - 9.30854800725824e-17) - 1.16610248007045e-15) + 1.83241046606283e-14) + Tone*(Tone*fs*(fs*(fs*(fs*(2.18640566240203e-24*fs - 1.4874793000649e-21) - 1.02064572803623e-18) + 3.20390887057414e-17) + 1.29001696810827e-16) + fs*(fs*(fs*(fs*(-2.28122296333533e-24*fs + 1.34667010907854e-21) + 5.83026394263095e-19) + 9.4709611548161e-17) + 3.55677789661019e-15) - 7.32964186425153e-14) + fs*(fs*(fs*(fs*(-2.28122296333533e-23*fs + 1.75813921430343e-20) + 1.5925279072204e-17) - 1.74964341674839e-15) - 4.21525922114464e-14) + 8.10365204511649e-13;

    a4 = Body*(Tone*(Tone*fs*(fs*(fs*(fs*(-1.10098119265056e-24*fs + 6.53794509302211e-22) - 6.97015807574444e-21) - 2.81458247587152e-20) - 1.28715756833812e-31) + fs*(fs*(fs*(fs*(1.31262695366239e-24*fs - 8.44692396510456e-22) + 9.67716852364725e-20) + 2.92826202944812e-18) - 3.51822809484109e-17) + 2.43779842488279e-29) + fs*(fs*(fs*(fs*(1.31262695366239e-23*fs - 1.21905105761555e-20) + 1.1019944255992e-18) + 4.65427400362912e-17) - 1.74915372010567e-15) + 9.16205233031414e-15) + Tone*(Tone*fs*(fs*(fs*(fs*(-1.09320283120102e-24*fs + 2.23121895009735e-21) - 5.10322864018117e-19) - 1.60195443528707e-17) + 1.9350254521624e-16) + fs*(fs*(fs*(fs*(1.14061148166766e-24*fs - 2.02000516361781e-21) + 2.91513197131548e-19) - 4.73548057740805e-17) + 5.33516684491528e-15) - 3.66482093212576e-14) + fs*(fs*(fs*(fs*(1.14061148166766e-23*fs - 2.63720882145514e-20) + 7.96263953610201e-18) + 8.74821708374195e-16) - 6.32288883171697e-14) + 4.05182602255824e-13;

    a5 = Body*(Tone*(Tone*fs*(fs*(fs*(fs*(2.20196238530113e-25*fs - 2.17931503100737e-22) + 6.97015807574444e-21) - 2.81458247587152e-20) - 4.29052522779372e-32) + fs*(fs*(fs*(fs*(-2.62525390732477e-25*fs + 2.81564132170152e-22) - 9.67716852364725e-20) + 2.92826202944812e-18) - 1.17274269828036e-17) + 4.87559684976559e-30) + fs*(fs*(fs*(fs*(-2.62525390732477e-24*fs + 4.06350352538518e-21) - 1.1019944255992e-18) + 4.65427400362912e-17) - 5.83051240035225e-16) + 1.83241046606283e-15) + Tone*(Tone*fs*(fs*(fs*(fs*(2.18640566240203e-25*fs - 7.4373965003245e-22) + 5.10322864018117e-19) - 1.60195443528707e-17) + 6.45008484054134e-17) + fs*(fs*(fs*(fs*(-2.28122296333533e-25*fs + 6.7333505453927e-22) - 2.91513197131548e-19) - 4.73548057740805e-17) + 1.77838894830509e-15) - 7.32964186425153e-15) + fs*(fs*(fs*(fs*(-2.28122296333533e-24*fs + 8.79069607151715e-21) - 7.96263953610201e-18) + 8.74821708374195e-16) - 2.10762961057232e-14) + 8.10365204511649e-14;
};


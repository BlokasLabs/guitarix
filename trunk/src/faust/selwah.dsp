// generated automatically
// DO NOT MODIFY!
declare id "selwah";
declare name "Selmer Wah";
declare category "Guitar Effects";
declare shortname "Selmer Wah";
declare description "Selmer Wah";

import("filter.lib");
import("effect.lib");
import("oscillator.lib");
import("guitarix.lib");

process(x) = x : _<:*(dry),(*(wet) : iir((b0/a0,b1/a0,b2/a0,b3/a0,b4/a0,b5/a0,b6/a0),(a1/a0,a2/a0,a3/a0,a4/a0,a5/a0,a6/a0))):>_ with {
    LogPot(a, x) = if(a, (exp(a * x) - 1) / (exp(a) - 1), x);
    Inverted(b, x) = if(b, 1 - x, x);
    s = 0.993;
    fs = float(SR);

    wet = wah_ctrl.wet_dry;
    dry = 1 - wet;

    Wah1 = (x : amp_follower_ud(0.01,0.1) : min(0.99) : max(0.1) : Inverted(1));
    
    Wah2 = wah_ctrl.wah :  smooth(s);
    
    sl = wah_ctrl.mode;

    Wah3 = (oscs(freq) + 1) / 2 : min(0.90) : max(0.01) with {
        freq = wah_ctrl.freq;
    }; 

    Wah = select3(sl, Wah2, Wah1, Wah3);

    b0 = Wah*(Wah*pow(fs,3)*(fs*(fs*(3.86402812614522e-30*fs + 7.74007134746085e-26) + 1.1678747498279e-22) + 3.74471317195193e-21) + pow(fs,2)*(fs*(fs*(fs*(-3.86646538813055e-30*fs - 7.73247041446566e-26) - 1.15093885842761e-22) - 1.16867440975778e-21) + 8.26135324400454e-20)) + pow(fs,2)*(fs*(fs*(fs*(-1.57938882748672e-29*fs - 3.50531492229223e-25) - 5.3829047771671e-22) - 2.5499891019935e-20) - 2.69849191037642e-19);

    b1 = Wah*(Wah*pow(fs,4)*(fs*(-2.31841687568713e-29*fs - 3.09602853898434e-25) - 2.3357494996558e-22) + pow(fs,2)*(pow(fs,2)*(fs*(2.31987923287833e-29*fs + 3.09298816578626e-25) + 2.30187771685523e-22) + 1.65227064880091e-19)) + pow(fs,2)*(pow(fs,2)*(fs*(9.4763329649203e-29*fs + 1.40212596891689e-24) + 1.07658095543342e-21) - 5.39698382075284e-19);

    b2 = Wah*(Wah*pow(fs,3)*(fs*(fs*(5.79604218921784e-29*fs + 3.87003567373042e-25) - 1.1678747498279e-22) - 1.12341395158558e-20) + pow(fs,2)*(fs*(fs*(fs*(-5.79969808219582e-29*fs - 3.86623520723283e-25) + 1.15093885842761e-22) + 3.50602322927335e-21) - 8.26135324400454e-20)) + pow(fs,2)*(fs*(fs*(fs*(-2.36908324123008e-28*fs - 1.75265746114611e-24) + 5.3829047771671e-22) + 7.6499673059805e-20) + 2.69849191037642e-19);

    b3 = Wah*(Wah*pow(fs,4)*(-7.72805625229045e-29*pow(fs,2) + 4.6714989993116e-22) + pow(fs,2)*(pow(fs,2)*(7.7329307762611e-29*pow(fs,2) - 4.60375543371045e-22) - 3.30454129760181e-19)) + pow(fs,2)*(pow(fs,2)*(3.15877765497343e-28*pow(fs,2) - 2.15316191086684e-21) + 1.07939676415057e-18);

    b4 = Wah*(Wah*pow(fs,3)*(fs*(fs*(5.79604218921784e-29*fs - 3.87003567373042e-25) - 1.1678747498279e-22) + 1.12341395158558e-20) + pow(fs,2)*(fs*(fs*(fs*(-5.79969808219582e-29*fs + 3.86623520723283e-25) + 1.15093885842761e-22) - 3.50602322927335e-21) - 8.26135324400454e-20)) + pow(fs,2)*(fs*(fs*(fs*(-2.36908324123008e-28*fs + 1.75265746114611e-24) + 5.3829047771671e-22) - 7.6499673059805e-20) + 2.69849191037642e-19);

    b5 = Wah*(Wah*pow(fs,4)*(fs*(-2.31841687568713e-29*fs + 3.09602853898434e-25) - 2.3357494996558e-22) + pow(fs,2)*(pow(fs,2)*(fs*(2.31987923287833e-29*fs - 3.09298816578626e-25) + 2.30187771685523e-22) + 1.65227064880091e-19)) + pow(fs,2)*(pow(fs,2)*(fs*(9.4763329649203e-29*fs - 1.40212596891689e-24) + 1.07658095543342e-21) - 5.39698382075284e-19);

    b6 = Wah*(Wah*pow(fs,3)*(fs*(fs*(3.86402812614522e-30*fs - 7.74007134746085e-26) + 1.1678747498279e-22) - 3.74471317195193e-21) + pow(fs,2)*(fs*(fs*(fs*(-3.86646538813055e-30*fs + 7.73247041446566e-26) - 1.15093885842761e-22) + 1.16867440975778e-21) + 8.26135324400454e-20)) + pow(fs,2)*(fs*(fs*(fs*(-1.57938882748672e-29*fs + 3.50531492229223e-25) - 5.3829047771671e-22) + 2.5499891019935e-20) - 2.69849191037642e-19);

    a0 = Wah*(Wah*pow(fs,2)*(fs*(fs*(fs*(-2.87536324325607e-29*fs - 7.24707538410401e-26) - 4.43177812582699e-23) - 8.54099892501484e-20) - 4.10877633167215e-19) + fs*(fs*(fs*(fs*(fs*(-1.0257776611342e-28*fs - 2.48312712069526e-25) + 2.63968556410486e-23) + 8.8419802743762e-20) - 1.52694083181368e-18) - 9.33812802652761e-18)) + fs*(fs*(fs*(fs*(fs*(1.35882114465691e-28*fs + 3.45921439164547e-25) + 2.51442385828734e-22) + 4.93391235123126e-19) + 1.81545551158112e-17) + 1.69793769618456e-16) + 4.66906401326381e-16;

    a1 = Wah*(Wah*pow(fs,2)*(pow(fs,2)*(fs*(1.72521794595364e-28*fs + 2.8988301536416e-25) + 8.86355625165398e-23) - 8.2175526633443e-19) + fs*(fs*(pow(fs,2)*(fs*(6.15466596680521e-28*fs + 9.93250848278106e-25) - 5.27937112820972e-23) - 3.05388166362736e-18) - 3.73525121061104e-17)) + fs*(fs*(pow(fs,2)*(fs*(-8.15292686794146e-28*fs - 1.38368575665819e-24) - 5.02884771657468e-22) + 3.63091102316224e-17) + 6.79175078473822e-16) + 2.80143840795828e-15;

    a2 = Wah*(Wah*pow(fs,2)*(fs*(fs*(fs*(-4.31304486488411e-28*fs - 3.623537692052e-25) + 4.43177812582699e-23) + 2.56229967750445e-19) + 4.10877633167215e-19) + fs*(fs*(fs*(fs*(fs*(-1.5386664917013e-27*fs - 1.24156356034763e-24) - 2.63968556410486e-23) - 2.65259408231286e-19) + 1.52694083181368e-18) - 4.66906401326381e-17)) + fs*(fs*(fs*(fs*(fs*(2.03823171698537e-27*fs + 1.72960719582274e-24) - 2.51442385828734e-22) - 1.48017370536938e-18) - 1.81545551158112e-17) + 8.48968848092278e-16) + 7.00359601989571e-15;

    a3 = Wah*(Wah*pow(fs,2)*(pow(fs,2)*(5.75072648651214e-28*pow(fs,2) - 1.7727112503308e-22) + 1.64351053266886e-18) + pow(fs,2)*(pow(fs,2)*(2.0515553222684e-27*pow(fs,2) + 1.05587422564194e-22) + 6.10776332725473e-18)) + pow(fs,2)*(pow(fs,2)*(-2.71764228931382e-27*pow(fs,2) + 1.00576954331494e-21) - 7.26182204632447e-17) + 9.33812802652761e-15;

    a4 = Wah*(Wah*pow(fs,2)*(fs*(fs*(fs*(-4.31304486488411e-28*fs + 3.623537692052e-25) + 4.43177812582699e-23) - 2.56229967750445e-19) + 4.10877633167215e-19) + fs*(fs*(fs*(fs*(fs*(-1.5386664917013e-27*fs + 1.24156356034763e-24) - 2.63968556410486e-23) + 2.65259408231286e-19) + 1.52694083181368e-18) + 4.66906401326381e-17)) + fs*(fs*(fs*(fs*(fs*(2.03823171698537e-27*fs - 1.72960719582274e-24) - 2.51442385828734e-22) + 1.48017370536938e-18) - 1.81545551158112e-17) - 8.48968848092278e-16) + 7.00359601989571e-15;

    a5 = Wah*(Wah*pow(fs,2)*(pow(fs,2)*(fs*(1.72521794595364e-28*fs - 2.8988301536416e-25) + 8.86355625165398e-23) - 8.2175526633443e-19) + fs*(fs*(pow(fs,2)*(fs*(6.15466596680521e-28*fs - 9.93250848278106e-25) - 5.27937112820972e-23) - 3.05388166362736e-18) + 3.73525121061104e-17)) + fs*(fs*(pow(fs,2)*(fs*(-8.15292686794146e-28*fs + 1.38368575665819e-24) - 5.02884771657468e-22) + 3.63091102316224e-17) - 6.79175078473822e-16) + 2.80143840795828e-15;

    a6 = Wah*(Wah*pow(fs,2)*(fs*(fs*(fs*(-2.87536324325607e-29*fs + 7.24707538410401e-26) - 4.43177812582699e-23) + 8.54099892501484e-20) - 4.10877633167215e-19) + fs*(fs*(fs*(fs*(fs*(-1.0257776611342e-28*fs + 2.48312712069526e-25) + 2.63968556410486e-23) - 8.8419802743762e-20) - 1.52694083181368e-18) + 9.33812802652761e-18)) + fs*(fs*(fs*(fs*(fs*(1.35882114465691e-28*fs - 3.45921439164547e-25) + 2.51442385828734e-22) - 4.93391235123126e-19) + 1.81545551158112e-17) - 1.69793769618456e-16) + 4.66906401326381e-16;
};
